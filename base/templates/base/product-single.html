{% extends 'base/template.html' %} {% load static %} {% block content %}
<script>
  function selectColor(element) {
    var swatches = document.getElementsByClassName("swatch-violet");
    for (var i = 0; i < swatches.length; i++) {
      swatches[i].style.boxShadow = "none";
    }
    element.style.boxShadow = "0 0 5px rgba(0, 0, 0, 0.5)";
    var selectedColorInput = document.getElementById("selected-color");
    selectedColorInput.value = element.getAttribute("data-color");
  }
  document.addEventListener("DOMContentLoaded", function () {
    const checkboxes = document.querySelectorAll(".color-checkbox");
    checkboxes.forEach((checkbox) => {
      checkbox.addEventListener("click", (event) => {
        checkboxes.forEach((otherCheckbox) => {
          if (otherCheckbox !== checkbox) {
            otherCheckbox.checked = false;
          }
        });
      });
    });
  });
  document.addEventListener("DOMContentLoaded", function () {
    const colorCheckboxes = document.querySelectorAll(".color-checkbox");
    colorCheckboxes.forEach(function (checkbox) {
      checkbox.addEventListener("click", function () {
        colorCheckboxes.forEach(function (otherCheckbox) {
          otherCheckbox.removeAttribute("required");
        });
        this.setAttribute("required", "required");
      });
    });
  });
</script>

<section class="page-header h-13" style="background-color: #f5f5f5">
  <div class="container mb-20">
    <div class="row">
      <div class="col-md-12">
        <div class="content">
          <h1
            class="page-name"
            style="font-weight: 100"
            class="font-sans Segoe-UI"
          >
            <span class="font-sans Segoe-UI text-5xl">Shop</span>
          </h1>
          <ol class="flex gap-4">
            <li>
              <a
                href="{% url 'home' %}"
                style="color: black"
                class="font-sans Segoe-UI text-2xl"
                >Home</a
              >
            </li>
            {% if category_id == 'plus size' %}
            <li class="font-sans Segoe-UI text-2xl">/</li>
            <li class="active font-sans Segoe-UI text-2xl">Plus size</li>
            {% elif category_id == 'normal' %}
            <li class="font-sans Segoe-UI text-2xl">/</li>
            <li class="active font-sans Segoe-UI text-2xl">Normal size</li>
            {% else %}
            <li class="font-sans Segoe-UI text-2xl">/</li>
            <li class="font-sans Segoe-UI text-2xl">Produse</li>
            {% endif %}
          </ol>
        </div>
      </div>
    </div>
  </div>
</section>
<section class="single-prod">
  <div class="all-item">
    <div class="row mt-20">
      <div class="col-md-5">
        <div class="single-product-slider">
          <div id="carousel-custom" class="carousel slide" data-ride="carousel">
            <div class="carousel-outer">
              <div class="carousel-inner">
                {% for image in product.image.all %}
                <div class="item{% if forloop.first %} active{% endif %}">
                  <img
                    src="{{ image.image.url }}"
                    alt=""
                    data-image="{{ image.color.name }}"
                  />
                </div>
                {% endfor %}
              </div>
              <a
                class="left carousel-control"
                href="#carousel-custom"
                data-slide="prev"
              >
                <i class="fa-solid fa-arrow-left" style="font-size: 20px"></i>
              </a>
              <a
                class="right carousel-control"
                href="#carousel-custom"
                data-slide="next"
              >
                <i class="fa-solid fa-arrow-right" style="font-size: 20px"></i>
              </a>
            </div>

            <ol class="carousel-indicators mCustomScrollbar meartlab">
              {% for image in product.image.all %}
              <li
                data-target="#carousel-custom"
                data-slide-to="{{ forloop.counter0 }}"
                {%
                if
                forloop.first
                %}class="active"
                {%
                endif
                %}
              >
                <img
                  src="{{ image.image.url }}"
                  alt=""
                  data-image="{{ image.color.name }}"
                />
              </li>
              {% endfor %}
            </ol>
          </div>
        </div>
      </div>
      <div class="col-md-7">
        <div class="single-product-details">
          <h2 class="font-sans Segoe-UI font-bold">{{product.name}}</h2>
          <p class="font-sans Segoe-UI">{{product.price}} MDL</p>
          <p class=" mt-10 font-sans Segoe-UI text-gray opacity-60">{{product.description}}</p>
          <form
            action="{% url 'add_to_cart' product.id %}"
            method="post"
            class="add-to-cart-form"
            id="add-to-cart-form"
          >
            {% csrf_token %}
            <div class="color-swatches">
              <div class="color-text">
                <span class="font-sans Segoe-UI" >Color:</span>
              </div>
              <div class="colors">
                {% for color in product.colors.all %}
                <a
                  href="#!"
                  style="background-color: #{{ color.hex_code }}; border: 0.1px solid black; display: inline-block; position: relative; width: 30px; height: 30px;"
                  class="swatch-violet"
                  value="{{ color.name }}"
                  onclick="selectColor(this);"
                  data-color="{{ color.name }}"
                  id="color-selection"
                >
                  <input
                    type="checkbox"
                    style="
                      position: absolute;
                      opacity: 0;
                      width: 110%;
                      height: 110%;
                      top: -5px;
                      left: -2px;
                    "
                    class="color-checkbox"
                    required
                  />
                </a>

                {% endfor %}
              </div>
            </div>
            <div class="product-size">
              <span class="font-sans Segoe-UI" >Size:</span>
              <select
                class="form-control font-sans Segoe-UI"
                id="selected-size"
                name="selected_size"
              >
                {% for size in product.size.all %}
                <option class="font-sans Segoe-UI" value="{{ size.name }}">{{ size.name }}</option>
                {% endfor %}
              </select>
            </div>

            <div class="buttons">
              {% csrf_token %}
              <input type="hidden" name="product" value="{{ product.id }}" />
              <input type="hidden" name="selected_color" id="selected-color" />
                <input
                  type="submit"
                  class="bg-black text-white rounded-md font-sans Segoe-UI uppercase font-semibold"
                  value="Adaugă în coș"
                />
              
              <a
                href=" "
                class="bg-black text-white rounded-md font-sans Segoe-UI"
                action="submit"
                value="{{product.id}}"
                >Cumpără</a
              >
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <div class="tabCommon mt-20">
        <ul class="nav nav-tabs">
          <li class="active">
            <a
              data-toggle="tab"
              href="#details"
              aria-expanded="true"
              class="font-sans Segoe-UI"
              >Details</a
            >
          </li>
        </ul>
        <div class="tab-content patternbg">
          <div id="details" class="font-sans Segoe-UI">
            <h4 class="font-semibold">Product Description</h4>
            <div>
              <p class="font-sans Segoe-UI">
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
                enim ad minim veniam, quis nostrud exercitation ullamco laboris
                nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor
                in reprehenderit in voluptate velit esse cillum dolore eu fugiat
                nulla pariatur. Excepteur sint occaecat cupidatat non proident,
                sunt in culpa qui officia deserunt mollit anim id est laborum.
                Sed ut per spici
                <br />
                Lorem ipsum dolor sit amet, consectetur adipisicing elit.
                Veritatis delectus quidem repudiandae veniam distinctio
                repellendus magni pariatur molestiae asperiores animi, eos quod
                iusto hic doloremque iste a, nisi iure at unde molestias enim
                fugit, nulla voluptatibus. Deserunt voluptate tempora aut illum
                harum, deleniti laborum animi neque, praesentium explicabo,
                debitis ipsa?
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}
